<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prezentacja Projektu HPTLC</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      padding-top: 70px;
    }
    .segment {
      padding: 50px 0;
    }
    .level-content {
      display: none;
    }
    .level-content.active {
      display: block;
    }
    footer {
      background-color: #f8f9fa;
      padding: 20px 0;
      text-align: center;
      font-size: 0.9rem;
      border-top: 1px solid #dee2e6;
    }
    .level-expl {
      font-style: italic;
      font-size: 0.9rem;
      margin-bottom: 15px;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Projekt HPTLC</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
              aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="#intro">Wstęp</a></li>
          <li class="nav-item"><a class="nav-link" href="#segment1">Cel</a></li>
          <li class="nav-item"><a class="nav-link" href="#segment2">Metoda</a></li>
          <li class="nav-item"><a class="nav-link" href="#segment3">Wyniki</a></li>
          <li class="nav-item"><a class="nav-link" href="#segment4">Zastosowania</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Wstęp -->
  <section id="intro" class="segment bg-light">
    <div class="container">
      <h2 class="mb-4">Wstęp</h2>
      <p>
        Każdy segment tej strony jest dostępny w trzech poziomach językowych: 
        <strong>techniczny</strong>, <strong)naukowy</strong> i <strong>popularno-naukowy</strong>. 
        Wybierając poziom, decydujesz, jak szczegółowe informacje chcesz zobaczyć: 
      </p>
      <ul>
        <li><strong>Techniczny:</strong> pełne szczegóły praktyczne i techniczne.</li>
        <li><strong>Naukowy:</strong> główne wnioski i podstawowe informacje naukowe.</li>
        <li><strong>Popularno-naukowy:</strong> uproszczone objaśnienia, dygresje i definicje dla osób niezaznajomionych z dziedziną.</li>
      </ul>
      <p>Możesz przełączać poziomy w dowolnym segmencie, aby dopasować treść do swojego poziomu wiedzy.</p>
    </div>
  </section>

  <!-- Segment 1: Cel -->
  <section id="segment1" class="segment">
    <div class="container">
      <h2 class="mb-4">Cel projektu</h2>
      <div class="level-expl">
        Wybierz język / poziom szczegółowości: Techniczny, Naukowy lub Popularno-naukowy.
      </div>
      <div class="btn-group mb-3" role="group" aria-label="Poziom zaawansowania">
        <button type="button" class="btn btn-primary" onclick="showLevel('segment1','tech')">Techniczny</button>
        <button type="button" class="btn btn-secondary" onclick="showLevel('segment1','sci')">Naukowy</button>
        <button type="button" class="btn btn-success" onclick="showLevel('segment1','pop')">Popularno-naukowy</button>
      </div>
      <div id="segment1-tech" class="level-content">
        <p>Badanie skupia się na utrzymaniu jednolitego oświetlenia płytki 10x10 cm HPTLC w zakresie UV-C. Optymalizacja światła pozwala na redukcję gradientu intensywności do 0.05%. Ten cel wynikał z wcześniejszych problemów w 6 iteracjach projektu aplikacji do analizy obrazu TLC. Początkowo próbowano kompensować nierównomierności oprogramowaniem, testując metody takie jak normalizacja przez dzielenie obrazu rozwiniętej płytki przez obraz czystej płytki (tło), lub wielokrotną iterację regresji wielomianowej 2D w celu wytworzenia jednolitego tła bez szumu średnio i drobnoziarnistego które wykorzystywano do subtrakcji od obrazu oryginalnego, a w kolejnych powtórzeniach do wyznaczania tła w regresji wykorzystywano tylko te piksele, które nie zostały w poprzednim etapie zakwalifikowane jako plamka. Te rozwiązania okazały się jednak niewystarczające z powodu podatności na artefakty i błędy wynikające z zajmowania dużej części tła przez smugi i plamki, co obniżało wiarygodność pomiarów.

W odpowiedzi na te wyzwania, przyjęto podejście sprzętowe. Wykorzystano środowisko Blender do symulacji warunków oświetlenia o prametrach możliwie jak najbardziej zbliżonych do fizyki światła UVC z emiterów o parametrach zbliżonych do diod LED i cylindrycznych świetlówek. Na podstawie wyników symulacji zaprojektowano fizyczną komorę, którą wyłożono folią aluminiową. Niestety, drobne zagięcia folii generowały szum o średniej ziarnistości, trudniejszy do usunięcia niż standardowy szum drobnoziarnisty. Analiza symulacji i testów in vivo wykazała, że symulacje w środowisku blender są bardzo zbliżone do wyników in vivo, a studium literatury naukowej i forów fotograficznych pozwoliło sądzić, że folia teflonowa zapewnia znacznie bardziej gładkie odbicie światła uvc. Dzięki optymalizacji geometrycznej komory i uwzględnieniu parametrów materiału jej ścianek zbliżonych do właściwości optycznych folii teflonowej udało się osiągnąć w symulacji gradację intensywności oświetlenia mniejszą niż 0.05%, co oznacza, że różnica między najciemniejszym a najjaśniejszym obszarem płytki jest niewykrywalna dla kamery o głębi koloru do 11 bitów.</p>
      </div>
      <div id="segment1-sci" class="level-content">
        <p>Analiza obrazu płytek HPTLC wymaga do pomiarów ilościowych ekstremalnie jednolitego oświetlenia całej płytki, które próbuje się osiągnąć za pomocą cyfrowego wyrównywania.  Wczesne próby cyfrowej kompensacji, takie jak normalizacja obrazu przez dzielenie tło (zdjęcie czystej płytki HPTLC) lub przez odtworzone jednolite tło z użyciem regresji wielomianowej 2D, wykazały ograniczenia w zastosowaniach ilościowych. Pierwsza metoda jest podatna na błędy wynikające z artefaktów powstałych w trakcie rozwijania chromatogramu, a druga jest zawodna w przypadku próbek, które zajmują znaczną powierzchnię tła. Nawet iteracyjne podejście oparte na regresji wielomianowej przynosiło jedynie marginalną poprawę powtarzalności pomiarów (2-3%).

Dążenie do eliminacji błędów tła doprowadziło do nas zastosowania metod fizycznych. Zoptymalizowano komorę do fotografii, korzystając z symulacji w oprogramowaniu Blender, które z dużą dokładnością przewidywały zachowanie się światła UVC i jego interakcję z powierzchnią komory do fotografii. Symulacje poparte studium literatury naukowej wykazały, że optymalne rozproszenie światła można osiągnąć przy użyciu materiałów o wysokiej dyfuzyjności takie jak matowa folia aluminiowa lub folia teflonowa (PTFE), przy czym w komorze zastosowano tę pierwszą ze względu na większą dostępność. Jednak wyniki danych in vivo nie potwierdziły większej dokładności pomiarów zbudowanej przez nas  komory w kontraście do klasycznej konstrukcji, gdyż na uzyskanych obrazach pojawił się szum o trudnym do skorygowania charakterze. 

Aczkolwiek dalsza analiza danych i literatury wykazała, że symulacje mogą być cennym narzędziem do projektowania optymalnych systemów oświetleniowych do precyzyjnej analizy obrazu, a szum był wynikiem drobnych zagięć folii aluminiowej, więc pokrycie komory folią teflonową mogłoby istotnie poprawić uzyskane wyniki.

Ostatecznie, obliczona w symulacji w blender w dla komory wyłożonej folią PTFE jednolitość oświetlenia jest na tyle wysoka, że obraz zarejestrowany 11-bitową kamerą nie wykazuje zauważalnych różnic w jasności na całej powierzchni płytki.  Różnica między najciemniejszym a najjaśniejszym obszarem wynosi tylko 0.05% i jest zauważalna dopiero przy 12-bitowej głębi koloru (0-2047) poziomów dla każdego z 3 kanałów koloru.</p>
      </div>
      <div id="segment1-pop" class="level-content">
        <p>Celem tego badania było sprawienie, żeby obraz płytki HPTLC był równomiernie oświetlony, dzięki czemu kamera pokaże dokładny rozkład chemikaliów, bez potrzeby poprawiania obrazu komputerowo. Dla niezaznajomionych, HPTLC to metoda chemiczna, w której rozdziela się różne substancje od siebie, a dokonuje się to na specjalnej płytce, którą potem można sfotografować i przeanalizować przez odpowiednie  oprogramowanie. Aby jednak wykonać zdjęcia należy ośwetlić płytkę za pomocą światła UV - dopiero wówczas na płytce uwidaczniają się plamki - a każda z nich to inna substancja. Wcześniej, próbowaliśmy naprawiać zdjęcia za pomocą sprytnych sztuczek komputerowych. Na przykład, chcieliśmy, aby program dzielił każdy piksel zdjęcia takiej płytki, przez liczbę - która wskazywała jaka powinna byś jasność tego konkretnego piksela, gdyby nie było w tym miejscu żadnej plamki, ale to było trudne, bo często chemikalia rozlewały się po całej płytce, myląc program i dając nam niedokładne wyniki. Odkryliśmy, że najlepszą metodą na uzyskanie dokładnych wyników nie jest próba naprawiania złego zdjęcia, ale zrobienie od początku idealnego zdjęcia!

W tym celu, stworzyliśmy wirtualną makietę specjalnej komory do fotografii tych płytek, używając programu do animacji 3D o nazwie Blender.  W tej wirtualnej komorze mogliśmy sprawdzić, jak światło rozchodzi się od żarówek UVC i jak najlepiej oświetlić płytkę, unikając cieni. Następnie, na podstawie symulacji, zbudowaliśmy taką komorę z lekkiego styropianu. Na początku wyłożyliśmy ją folią aluminiową, ale okazało się, że jej zagięcia tworzyły brzydkie cienie. Wymieniliśmy więc folię aluminiową na teflonową, która według literatury naukowej nadaje się najlepiej do idealnego rozpraszania światła i przygotowaliśmy symulacje w programie blender. Dzięki temu, uzyskany obraz jest tak równo oświetlony, że nawet całkiem precyzyjna kamera ma problem z odróżnieniem jaśniejszych i ciemniejszych miejsc na zdjęciu czystej płytki przed nałożeniem na nią jakichkolwiek substancji. Słowem końcowym, w idealnych warunkach na czystej płytce każde miejsce należące do tła - czyli takie gdzie nie ma żadnych plamek, powinno mieć na zdjęciu dokładnie taki sam kolor, ale tak się nie dzieje, z wielu powodów - np. dlatego, że sama budowa kamery powoduje już pewne nierównomierności. Jednak tym najbardziej istotnym elementem jest oświetlenie płytki, gdzie w tradycyjnych komorach do fotografii, część płytki bliższa świetlówce jest mocniej oświetlona od tej dalszej. </p>
      </div>
    </div>
  </section>

  <!-- Segmenty 2,3,4 – analogicznie do poprzedniej wersji, dodany element .level-expl -->
  <!-- Segment 2: Metoda -->
  <section id="segment2" class="segment bg-light">
    <div class="container">
      <h2 class="mb-4">Metoda</h2>
      <div class="level-expl">
        Wybierz język / poziom szczegółowości: Techniczny, Naukowy lub Popularno-naukowy.
      </div>
      <div class="btn-group mb-3" role="group">
        <button type="button" class="btn btn-primary" onclick="showLevel('segment2','tech')">Techniczny</button>
        <button type="button" class="btn btn-secondary" onclick="showLevel('segment2','sci')">Naukowy</button>
        <button type="button" class="btn btn-success" onclick="showLevel('segment2','pop')">Popularno-naukowy</button>
      </div>
      <div id="segment2-tech" class="level-content">
        <p>Użycie dyfuzorów i źródeł światła LED o wysokiej stabilności spektralnej. Pozycjonowanie kamer z precyzyjnym kalibratorem światła.</p>
      </div>
      <div id="segment2-sci" class="level-content">
        <p>Metoda opiera się na symulacji rozkładu światła oraz eksperymentalnym ustawieniu źródeł LED. Celem jest osiągnięcie rozkładu jednolitego w granicach 0.05%, odzwierciedlając warunki laboratoryjne przy niskobudżetowej konstrukcji.</p>
      </div>
      <div id="segment2-pop" class="level-content">
        <p>Rozkład światła na płytce jest kontrolowany przez specjalne lampy i „filtry”, żeby każdy fragment płytki był oświetlony jednakowo.</p>
      </div>
    </div>
  </section>

  <!-- Segment 3: Wyniki -->
  <section id="segment3" class="segment">
    <div class="container">
      <h2 class="mb-4">Wyniki</h2>
      <div class="level-expl">
        Wybierz język / poziom szczegółowości: Techniczny, Naukowy lub Popularno-naukowy.
      </div>
      <div class="btn-group mb-3" role="group">
        <button type="button" class="btn btn-primary" onclick="showLevel('segment3','tech')">Techniczny</button>
        <button type="button" class="btn btn-secondary" onclick="showLevel('segment3','sci')">Naukowy</button>
        <button type="button" class="btn btn-success" onclick="showLevel('segment3','pop')">Popularno-naukowy</button>
      </div>
      <div id="segment3-tech" class="level-content">
        <p>Różnica w intensywności między najciemniejszym a najjaśniejszym punktem <strong>0.05%</strong>. Dane uzyskane dla płytki 10x10 cm z kamerą 13-bitową.</p>
      </div>
      <div id="segment3-sci" class="level-content">
        <p>Symulacje i eksperymenty potwierdzają, że fizyczne utrzymanie jednolitego oświetlenia minimalizuje potrzebę cyfrowego wyrównywania obrazu, co zwiększa wiarygodność analizy HPTLC.</p>
      </div>
      <div id="segment3-pop" class="level-content">
        <p>Nasze ustawienia światła działają tak dobrze, że obraz płytki jest praktycznie idealny, bez konieczności komputerowego poprawiania jasności.</p>
      </div>
    </div>
  </section>

  <!-- Segment 4: Zastosowania -->
  <section id="segment4" class="segment bg-light">
    <div class="container">
      <h2 class="mb-4">Zastosowania</h2>
      <div class="level-expl">
        Wybierz język / poziom szczegółowości: Techniczny, Naukowy lub Popularno-naukowy.
      </div>
      <div class="btn-group mb-3" role="group">
        <button type="button" class="btn btn-primary" onclick="showLevel('segment4','tech')">Techniczny</button>
        <button type="button" class="btn btn-secondary" onclick="showLevel('segment4','sci')">Naukowy</button>
        <button type="button" class="btn btn-success" onclick="showLevel('segment4','pop')">Popularno-naukowy</button>
      </div>
      <div id="segment4-tech" class="level-content">
        <p>Utrzymanie bardzo jednolitego oświetlenia może być użyte w innych dziedzinach, np. w analizie spektroskopowej, mikroskopii UV-C, lub przy tworzeniu referencyjnych obrazów materiałów fluorescencyjnych.</p>
      </div>
      <div id="segment4-sci" class="level-content">
        <p>Projekt wskazuje na możliwość tworzenia low-cost, ale precyzyjnych systemów oświetlenia do analiz chemicznych i fizycznych wymagających ekstremalnej jednolitości w UV-C.</p>
      </div>
      <div id="segment4-pop" class="level-content">
        <p>Podobne systemy mogą być używane w laboratoriach lub szkołach, gdzie potrzebne jest bardzo równe oświetlenie do dokładnej obserwacji próbek chemicznych.</p>
      </div>
    </div>
  </section>

  <!-- Stopka -->
  <footer>
    <div class="container">
      <p>Autor: Jan Kowalski | Licencja: CC BY-SA 4.0</p>
    </div>
  </footer>

  <!-- Bootstrap 5 JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function showLevel(segment, level) {
      const levels = ['tech', 'sci', 'pop'];
      levels.forEach(l => {
        const el = document.getElementById(segment + '-' + l);
        if(el) el.classList.remove('active');
      });
      const activeEl = document.getElementById(segment + '-' + level);
      if(activeEl) activeEl.classList.add('active');
    }
  </script>
</body>
</html>
